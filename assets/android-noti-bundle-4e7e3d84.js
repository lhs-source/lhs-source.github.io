import{u as a}from"./vue.f36acd1f-f6c87614.js";import{d as s,c as t,b as o,a as p}from"./app-f2535a55.js";const e={class:"markdown-body"},c=o(`<p><div class="table-of-contents"><ul><li><a href="#%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C-%EB%85%B8%ED%8B%B0%ED%94%BC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%B2%88%EB%93%A4-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%B5%9C%EC%8B%A0%ED%99%94-android-notification-bundle-data">안드로이드 노티피케이션 번들 데이터 최신화 Android Notification Bundle Data</a></li></ul></div></p><h1 id="%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C-%EB%85%B8%ED%8B%B0%ED%94%BC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%B2%88%EB%93%A4-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%B5%9C%EC%8B%A0%ED%99%94-android-notification-bundle-data" tabindex="-1">안드로이드 노티피케이션 번들 데이터 최신화 Android Notification Bundle Data</h1><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">sendNoti</span><span class="token punctuation">(</span>title<span class="token operator">:</span> String<span class="token punctuation">,</span> message<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> MainActivity<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>  
        flags <span class="token operator">=</span> Intent<span class="token punctuation">.</span>FLAG_ACTIVITY_CLEAR_TASK <span class="token operator">or</span> Intent<span class="token punctuation">.</span>FLAG_ACTIVITY_NEW_TASK <span class="token operator">or</span> Intent<span class="token punctuation">.</span>FLAG_ACTIVITY_SINGLE_TOP
        <span class="token keyword">data</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;key&quot;</span></span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{</span>value <span class="token operator">-&gt;</span> 
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;key&quot;</span></span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">val</span> pendingIntent <span class="token operator">=</span> PendingIntent<span class="token punctuation">.</span><span class="token function">getActivity</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> intent<span class="token punctuation">,</span> FLAG_MUTABLE<span class="token punctuation">)</span> 
    <span class="token keyword">val</span> notificationBuilder <span class="token operator">=</span> NotificationCompat<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> channelId<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setContentIntent</span><span class="token punctuation">(</span>pendingIntent<span class="token punctuation">)</span>  
<span class="token punctuation">}</span>
</code></pre><p>이렇게 넣어주었는데, 노티를 띄울 때는 <code class="">intent Bundle[{key=newvalue}]</code> 로 표시되고 onCreate 에서 노티 데이터를 받았을 때는 <code class="">bundle Bundle[{key=oldvalue}]</code> 로 표시된다.</p><p>가장 최근으로 띄운 노티의 데이터가 아닌, 이젠 노티의 데이터를 사용하는 듯 하다.</p><p><a href="https://stackoverflow.com/a/3140497">Android keeps caching my intents Extras, how to declare a pending intent that keeps fresh extras? - Stack Overflow</a></p><p>가장 최신의 노티 데이터를 항상 덮어 쓰게끔 하면 된다!</p><ol><li><code class="">FLAG_UPDATE_CURRENT</code> 플래그를 사용하고</li><li><code class="">requestCode</code> 를 0 고정 값이 아니라 유니크한 값으로 지정해주면 된다.</li></ol><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> pendingIntent <span class="token operator">=</span> PendingIntent<span class="token punctuation">.</span><span class="token function">getActivity</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> intent<span class="token punctuation">,</span> FLAG_MUTABLE<span class="token punctuation">)</span>
</code></pre><p>우선은 별다른 규칙 없이 현재 타임스탬프를 지정해주니까, 내가 넣어준 마지막 값으로 잘 들어온다.</p>`,10),i=[c],E={title:"안드로이드 노티피케이션 번들 데이터 최신화 Android Notification Bundle Data",meta:[{name:"description",content:"안드로이드 노티피케이션을 터치해 액티비티를 진입할 때 onCreate 에서 전달받는 데이터가 원치 않는 값으로 들어온다. 해결 방법을 찾아보자."},{property:"og:title",content:"안드로이드 노티피케이션 번들 데이터 최신화 Android Notification Bundle Data"}]},C="",f=s({__name:"android-noti-bundle",setup(l,{expose:n}){return a({title:"안드로이드 노티피케이션 번들 데이터 최신화 Android Notification Bundle Data",meta:[{name:"description",content:"안드로이드 노티피케이션을 터치해 액티비티를 진입할 때 onCreate 에서 전달받는 데이터가 원치 않는 값으로 들어온다. 해결 방법을 찾아보자."},{property:"og:title",content:"안드로이드 노티피케이션 번들 데이터 최신화 Android Notification Bundle Data"}]}),n({frontmatter:{title:"안드로이드 노티피케이션 번들 데이터 최신화 Android Notification Bundle Data",meta:[{name:"description",content:"안드로이드 노티피케이션을 터치해 액티비티를 진입할 때 onCreate 에서 전달받는 데이터가 원치 않는 값으로 들어온다. 해결 방법을 찾아보자."},{property:"og:title",content:"안드로이드 노티피케이션 번들 데이터 최신화 Android Notification Bundle Data"}]},excerpt:void 0}),(k,r)=>(p(),t("div",e,i))}});export{f as default,C as excerpt,E as frontmatter};
